---
import Layout from '../layout/Layout.astro';
import Loading from '../components/Loader/Loading.vue';

/** !! Dont't touch this !! [  export const prerender = true;  ] **/

---

<Layout>
	<Loading client:load />
	<div style={{
		background: "url('/background-dark.png')",
		backgroundSize: "cover",
		backgroundPosition: "center",
		backgroundRepeat: "no-repeat",
		backgroundAttachment: "fixed",
	}} class="min-h-screen flex items-center justify-center" id="hero">

	<div class="relative z-[2]">
		<div class="text-2xl md:text-4xl font-ultrabold font-mont">Hello JavaScriptist 👋</div>
		<h1 class="text-sm md:text-lg">JavaScript Professional Certification Examination</h1>
		<div class="hidden" id="prefetch">
			<h2>JSPCE - JavaScript Professional Certification Examination</h2>
			<h3>JavaScript 資格 試験</h3>
		</div>
		<div class="flex items-center justify-center gap-4 space-x-4 mt-[2rem]">
			<a href="/about" class="bg-[#E0234E] dark:bg-[#E0234E] font-mont text-lg md:text-xl text-white rounded-lg px-3 py-2 transition duration-150">Get Started</a>
		</div>
	</div>
	</div>
</Layout>

<script>
	/**
	 * テーマが変更されたときに実行されるイベントリスナー
	 * @param {Event} event - テーマ変更イベント
	 */
	window.addEventListener("themeChanged", (event) => {
		/**
		 * 現在のテーマを取得する。取得できない場合はデフォルトでライトテーマを使用する。
		 * @type {string}
		 */
		const currentTheme = localStorage.getItem("theme") || "light";
		const hero = document.getElementById("hero");

		// prefetch で事前に取って来た画像を埋め込む
		if (currentTheme === "dark") {
			hero.style.background = "url('/background-dark.png')";
			hero.style.backgroundSize = "cover";
		}else {
			hero.style.background = "url('/background-light.png')";
			hero.style.backgroundSize = "cover";
		}
	})

	window.dispatchEvent(new Event("themeChanged"));
</script>